# aws-s3-bucket

Terraform module to create an AWS S3 Bucket with optional configurations.

By default, the bucket name is autogenerated using input variables: `${var.stage}-${var.owner}-${var.purpose}`

## Common Variables

| Name      | Description                                                    | Type   | Validation                                      | Default | Required |
|-----------|----------------------------------------------------------------|--------|-------------------------------------------------|---------|----------|
| `stage`   | The stage of development (e.g., test, dev, staging, prod).     | string | Must be one of `test`, `dev`, `staging`, `prod` |         | yes      |
| `purpose` | A short description about the purpose of the created resource. | string | Must match the regex `^[a-zA-Z0-9-_]*$`         |         | yes      |
| `owner`   | The owner of the deployed infrastructure.                      | string | Must have at least three characters             |         | yes      |

## Custom Variables

| Name             | Description                                                                    | Type    | Validation  | Default | Required |
|------------------|--------------------------------------------------------------------------------|---------|-------------|---------|----------|
| `versioning`     | Whether to configure the S3 bucket versioning state.                           | bool    |             | false   | no       |
| `public`         | Whether to make the S3 bucket public. Must be true for static website hosting. | bool    |             | false   | no       |
| `force_destroy`  | Whether to delete all objects from the bucket when the bucket is destroyed.    | bool    |             | true    | no       |
| `static_website` | Whether to configure the S3 bucket to host a static website.                   | bool    |             | false   | no       |
| `force_name`     | Force a specific name for the S3 bucket.                                       | string  |             | ""      | no       |

## Outputs

| Name               | Description                                      |
|--------------------|--------------------------------------------------|
| `bucket_name`      | The name of the main S3 bucket.                  |
| `bucket_arn`       | The ARN of the main S3 bucket.                   |
| `zone_id`          | The hosted zone ID of the main S3 bucket.        |
| `regional_domain`  | The regional domain name of the main S3 bucket.  |
| `base_domain`      | The base domain name of the main S3 bucket.      |
| `website_endpoint` | The main S3 bucket website endpoint.             |

## Usage

```hcl
module "s3_bucket" {
  source = "git@github.com:JordiiBru/aws-s3-bucket.git?ref=[TAG]"

  # Common variables
  stage           = "test"
  owner           = "wanda"
  purpose         = "tfg"

  # Custom variables
  versioning      = false
  public          = false
  force_destroy   = false
  static_website  = false
}
```