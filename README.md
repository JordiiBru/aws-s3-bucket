# aws-s3-bucket

Terraform module to create an AWS S3 Bucket with optional configurations.

By default, the bucket name is autogenerated using input variables: `${var.stage}-${var.owner}-${var.purpose}`

## Required Variables

| Name      | Description                            | Type   | Default | Validation                                    |
|-----------|----------------------------------------|--------|---------|-----------------------------------------------|
| `stage`   | The stage of development               | string | N/A     | Must be one of `test`, `dev`, `staging`, `prod`|
| `purpose` | Short description about the resource   | string | null    | Must match the regex `^([a-zA-Z0-9-_]*)$`     |
| `owner`   | Owner of the deployed infrastructure   | string | null    | Must have more than three characters          |

## Custom Variables

| Name             | Description                                    | Type   | Default | Validation                       |
|------------------|------------------------------------------------|--------|---------|----------------------------------|
| `versioning`     | Enable versioning on the bucket                | bool   | false   | N/A                              |
| `public`         | Make the bucket public                         | bool   | false   | Must be true for static website  |
| `force_destroy`  | Allow destroying a bucket with objects inside  | bool   | true    | N/A                              |
| `static_website` | Make the bucket host a static website          | bool   | false   | N/A                              |
| `force_name`     | Force a specific name for the S3 bucket        | string | ""      | N/A                              |

## Outputs

| Name               | Description                                      |
|--------------------|--------------------------------------------------|
| `bucket_name`      | The name of the main S3 bucket.                  |
| `bucket_arn`       | The ARN of the main S3 bucket.                   |
| `zone_id`          | The hosted zone ID of the main S3 bucket.        |
| `regional_domain`  | The regional domain name of the main S3 bucket.  |
| `base_domain`      | The base domain name of the main S3 bucket.      |

## Usage

```hcl
module "s3_bucket" {
  source = "git@github.com:JordiiBru/aws-s3-bucket.git?ref=[TAG]"

  # Required variables
  stage           = "test"
  owner           = "wanda"
  purpose         = "tfg"

  # Custom variables
  versioning      = true
  public          = true
  force_destroy   = false
  static_website  = true
}
```